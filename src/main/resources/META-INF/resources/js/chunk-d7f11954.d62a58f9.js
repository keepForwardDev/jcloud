(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d7f11954"],{b3f6:function(e,t,r){},c741:function(e,t,r){"use strict";r("b3f6")},cb48:function(e,t,r){"use strict";r.r(t);var n,o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-login"},[r("div",{staticClass:"page-login--layer page-login--layer-area"},[r("ul",{staticClass:"circles"},e._l(10,(function(e){return r("li",{key:e})})),0)]),r("div",{staticClass:"page-login--layer page-login--layer-time",attrs:{flex:"main:center cross:center"}},[e._v(" "+e._s(e.time)+" ")]),r("div",{staticClass:"page-login--layer"},[r("div",{staticClass:"page-login--content",attrs:{flex:"dir:top main:justify cross:stretch box:justify"}},[e._m(0),r("div",{staticClass:"page-login--content-main",attrs:{flex:"dir:top main:center cross:center"}},[r("div",{staticClass:"page-login--form"},[r("el-card",{attrs:{shadow:"never"}},[r("el-form",{ref:"loginForm",attrs:{"label-position":"top",rules:e.rules,model:e.formLogin,size:"default"}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{type:"text",placeholder:"用户名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit.apply(null,arguments)}},model:{value:e.formLogin.username,callback:function(t){e.$set(e.formLogin,"username",t)},expression:"formLogin.username"}},[r("i",{staticClass:"fa fa-user-circle-o",attrs:{slot:"prepend"},slot:"prepend"})])],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit.apply(null,arguments)}},model:{value:e.formLogin.password,callback:function(t){e.$set(e.formLogin,"password",t)},expression:"formLogin.password"}},[r("i",{staticClass:"fa fa-keyboard-o",attrs:{slot:"prepend"},slot:"prepend"})])],1),r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{attrs:{type:"text",placeholder:"验证码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit.apply(null,arguments)}},model:{value:e.formLogin.code,callback:function(t){e.$set(e.formLogin,"code",t)},expression:"formLogin.code"}},[r("template",{slot:"append"},[r("img",{ref:"loginCode",staticClass:"login-code",attrs:{src:e.codeSrc},on:{click:e.changeSrc}})])],2)],1),r("el-button",{staticClass:"button-login",attrs:{size:"default",loading:e.loginLoading,type:"primary"},on:{click:e.submit}},[e._v(" 登录 ")]),r("el-form-item",{staticStyle:{"text-align":"center"}},[r("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.formLogin.rememberme,callback:function(t){e.$set(e.formLogin,"rememberme",t)},expression:"formLogin.rememberme"}},[e._v("保持登录")])],1)],1)],1)],1)]),r("div",{staticClass:"page-login--content-footer"})])])])},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-login--content-header"},[r("p",{staticClass:"page-login--content-header-motto"},[e._v(" 时间是一切财富中最宝贵的财富 ")])])}],a=r("fd6a"),s=(r("3fab"),r("ed02"),r("f1d6")),l=r.n(s),c=r("7736"),u=r("1353"),m=new Uint8Array(16);function d(){if(!n&&(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(m)}var f=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function p(e){return"string"===typeof e&&f.test(e)}for(var g=p,y=[],b=0;b<256;++b)y.push((b+256).toString(16).substr(1));function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(y[e[t+0]]+y[e[t+1]]+y[e[t+2]]+y[e[t+3]]+"-"+y[e[t+4]]+y[e[t+5]]+"-"+y[e[t+6]]+y[e[t+7]]+"-"+y[e[t+8]]+y[e[t+9]]+"-"+y[e[t+10]]+y[e[t+11]]+y[e[t+12]]+y[e[t+13]]+y[e[t+14]]+y[e[t+15]]).toLowerCase();if(!g(r))throw TypeError("Stringified UUID is invalid");return r}var h=v;function k(e,t,r){e=e||{};var n=e.random||(e.rng||d)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=n[o];return t}return h(n)}var C=k,L={mixins:[u["a"]],data:function(){return{timeInterval:null,time:l()().format("HH:mm:ss"),dialogVisible:!1,users:[],formLogin:{username:"",password:"",code:"",grant_type:"password",requestSn:"",rememberme:0},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]},timeStamp:"",loginLoading:!1}},computed:{codeSrc:function(){return"/auth/createCode?requestSn="+this.formLogin.requestSn+"&t="+this.timeStamp}},mounted:function(){var e=this;this.timeStamp=(new Date).getTime(),this.formLogin.requestSn=this.getUuid(),this.timeInterval=setInterval((function(){e.refreshTime()}),1e3)},beforeDestroy:function(){clearInterval(this.timeInterval)},methods:Object(a["a"])(Object(a["a"])({},Object(c["b"])("d2admin/account",["login"])),{},{refreshTime:function(){this.time=l()().format("HH:mm:ss")},submit:function(){var e=this;this.$refs.loginForm.validate((function(t){t?(e.loginLoading=!0,e.$post("/auth/login",e.formLogin).then((function(t){1===t.code?e.login(t).then((function(){e.$router.replace(e.$route.query.redirect||"/")})):(e.loginLoading=!1,e.changeSrc(),e.$message.error(t.msg))})).catch((function(t){e.loginLoading=!1}))):e.$message.error("表单校验失败，请检查")}))},getUuid:function(){return C().replace(/-/g,"")},changeSrc:function(){this.timeStamp=(new Date).getTime()}})},w=L,x=(r("c741"),r("cba8")),S=Object(x["a"])(w,o,i,!1,null,null,null);t["default"]=S.exports}}]);